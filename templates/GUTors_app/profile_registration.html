{% extends 'GUTors_app/base.html' %}

{% load staticfiles %}

{% block title_block %}
    {% if is_edit %}
        Edit Your Profile
    {% else %}
        Create Profile
    {% endif %}
{% endblock %}

{% block body_block %}
<div class="container profile-form-container mt-5">
    <div class="card p-4 shadow-lg bg-light">
        <h2 class="text-center text-dark">
            {% if is_edit %}
                Edit Your Profile
            {% else %}
                Register Here - Step 2
            {% endif %}
        </h2>
        
        <!-- Profile Picture Preview -->
        <div class="text-center">
            {% if is_edit %}
                <img id="avatarPreview" src="{{ user.userprofile.profile_picture.url }}" alt="Profile Picture" class="avatar">
            {% else %}
                <img id="avatarPreview" src="{% static 'images/avatar.jpg' %}" alt="Profile Pic" class="avatar">
            {% endif %}
        </div>

        <form method="post"
              action="{% url 'GUTors:register_profile' %}"
              enctype="multipart/form-data"
              class="mt-3">
            {% csrf_token %}
            
            <div class="form-group">
                {{ form.as_p }}
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-profile-submit">
                    {% if is_edit %}Update Profile{% else %}Create Profile{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>

<script src="{% static 'js/profilePicPreview.js' %}"></script>

{% endblock %}
